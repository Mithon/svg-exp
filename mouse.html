<!DOCTYPE html>

<html>

<head>
    <title>Svg Exploration</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: #f2f3f3;
            overflow: hidden;
        }

        svg {
            overflow: hidden;
        }

        svg:last-child {
            position: fixed;
            top: 0;
            left: 0;
            border-right: 1px solid #dcdcdc;
        }

    </style>

    <script src="resources/snap.svg-min.js"></script>

    <script>
        window.onload = function() {

            var w = Math.max(document.documentElement.clientWidth, window.innerWidth || 0)
            var h = Math.max(document.documentElement.clientHeight, window.innerHeight || 0)

            var s = Snap(w, h);
            var s2 = Snap(75,h);

            var circles = 0,
            squares = 0,
            mouseCircles = [],
            mouseSquares = [],
            mouseX = 0,
            mouseY = 0,
            time = 300,
            time2 = 20,
            cTime = 0,
            color = "",
            initiated = false,
            shape = "circle";

            var cButton = s2.rect(25, 20, 38, 10).attr({
                fill: "red"
            });
            var cButton2 = s2.rect(25, 20, 38, 10).attr({
                fill: "red"
            });

            var circleButton = s2.circle(35, 110, 0).attr({
                fill: "#009B77"
            });

            var rectButton = s2.rect(15, 160, 40, 0).attr({
                fill: "#009B77"
            });

            circleButton.animate({r: 20}, 1500, mina.elastic);
            rectButton.animate({height: 40}, 1500, mina.elastic );

            cButton.animate( { transform: "r" + 45 + ",30,20" }, 1600, mina.elastic);
            cButton2.animate( { transform: "r" + -45 + ",50,40" }, 1600, mina.elastic);


            function removeItems () {
                var Csquares = s.selectAll("rect");
                Csquares.animate({ transform: 't0,0 s0' }, 400, mina.backout);
                setTimeout(function () {
                    Csquares.remove();
                }, 420);
                var Ccircles = s.selectAll("circle");
                Ccircles.animate({r: 0}, 400, mina.backout);
                setTimeout(function () {
                    Ccircles.remove();
                }, 420);
            }

            cButton.mousedown(function(){
                removeItems();
            });

            cButton2.mousedown(function(){
                removeItems();
            });

            circleButton.mousedown(function(){
                shape = "circle";
                circleButton.animate({r: 25}, 100, mina.easeinout);
                setTimeout(function () {
                    circleButton.animate({r: 20}, 100, mina.easeinout);
                }, 100);
            });

            rectButton.mousedown(function(){
                shape = "square";
                rectButton.animate({ transform: 't0,0 s1.2' }, 100, mina.backout);
                setTimeout(function () {
                    rectButton.animate({ transform: 't0,0 s1' }, 100, mina.backout);
                }, 100);
            });

            function clearArea() {
                s.clear();
                console.log("poop");
            }

            function timer() {
                time++;
                time2++;
                if (time2 > 100)
                    time2 = 20;

                if (time > 4000)
                    time = 0;
            }

            var initiate = function() {
                if (initiated == false) {
                    var startTime = setInterval(function () {timer()}, 100);
                    initiated = true;
                };
            };

            function moveFunc(ev, x, y) {
                mouseX = x;
                mouseY = y;

            };

            var genColour = function(opt) {
                if (opt == 0) {
                    return time.toString(16);
                }
                else {
                    console.log(mouseX*2);
                    return time.toString(16)+(mouseX*2).toString(16);
                }
            }

            var genStroke = function() {
                return Math.floor(time2/100+100);
            }

            s.mousedown(function(){

                if (shape == "circle") {

                    circles++;
                    cTime = time;

                    colour = genColour(1);
                    stroke = genStroke();
                    sColour = genColour(0);

                    mouseCircles.push(s.circle(mouseX, mouseY, 0));
                    mouseCircles[circles-1].attr({
                        fill: "#"+colour,
                        stroke: sColour,
                        strokeWidth: stroke
                    });

                    mouseCircles[circles-1].animate({r: time2}, 700, mina.elastic);
                    mouseCircles[circles-1].addClass("circle");
                }

                else {

                    squares++;

                    colour = genColour(1);
                    stroke = genStroke();
                    sColour = genColour(0);

                    mouseSquares.push(s.rect(mouseX, mouseY, time2, 0));
                    mouseSquares[squares-1].attr({
                        fill: "#"+sColour,
                        stroke: sColour,
                        strokeWidth: stroke
                    });

                    mouseSquares[squares-1].animate({height: time2}, 700, mina.elastic);
                    mouseSquares[squares-1].addClass("square");
                }
            });


            initiate();

            s.mousemove(moveFunc);

        }
    </script>

</head>

<body>



</body>

</html>
